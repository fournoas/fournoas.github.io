<!doctype html><html lang=zh-CN><head><meta name=generator content="Hugo 0.152.2"><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="朴素技术博客"><title>白汤四物</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/fontawesome.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/solid.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/regular.min.css crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js crossorigin=anonymous></script><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/styles/rainbow.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css crossorigin=anonymous referrerpolicy=no-referrer><link href rel=alternate type=application/rss+xml title=白汤四物><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-3GNL63B62Q"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3GNL63B62Q")</script></head><body><nav class=nav><div class=nav-container><h1 class=nav-title><a href=/><img src=/logo.png alt=白汤四物></a></h1><ul><li><a href=/posts/><span>文章</span></a></li><li><a href=/moments/><span>动态</span></a></li><li><a href=/categories/><span>分类</span></a></li><li><a href=/tags/><span>标签</span></a></li><li><a href=/search/><span>搜索</span></a></li><li><a href=/about/><span>关于</span></a></li></ul></div></nav><div class=banner><main><blockquote><p>Ours is essentially a tragic age, so we refuse to take it tragically. The cataclysm has happened, we are among the ruins, we start to build up new little habitats, to have new little hopes. It is rather hard work: there is now no smooth road into the future: but we go round, or scramble over the obstacles. We've got to live, no matter how many skies have fallen.</p></blockquote><p align=right>― D.H. Lawrence, Lady Chatterley's Lover</p></main></div><main><div class=catalogue><div class=catalogue-item><time datetime="2025-09-12 00:00:00 +0000 UTC" class=catalogue-time>2025年9月12日</time>
<a href=/posts/which-work-did-xiao-xue-sheng-shi-wan-ge-wei-shen-me-pirate/ class=catalogue-title>《小学生十万个为什么》盗版了谁？</a><div class=catalogue-line></div><div class=catalogue-summary><p>上世纪 80 年代末、90 年代初，黑龙江技术出版社曾出版过一套名为《小学生十万个为什么》的科普丛书。</p><a href=https://book.douban.com/subject/1825593/ target=_blank class=card title=https://book.douban.com/subject/1825593/><div class=card-image style=background-image:url(/posts/which-work-did-xiao-xue-sheng-shi-wan-ge-wei-shen-me-pirate/chs-cover-1.jpg)></div><div class=card-content><strong class=card-content-title>小学生十万个为什么（第一系列）</strong><span class=card-content-subtitle>book.douban.com</span><span class=card-content-desc>小博士系列丛书</span></div></a><a href=https://book.douban.com/subject/2376789/ target=_blank class=card title=https://book.douban.com/subject/2376789/><div class=card-image style=background-image:url(/posts/which-work-did-xiao-xue-sheng-shi-wan-ge-wei-shen-me-pirate/chs-cover-2.jpg)></div><div class=card-content><strong class=card-content-title>小学生十万个为什么（第二系列）</strong><span class=card-content-subtitle>book.douban.com</span><span class=card-content-desc>小博士系列丛书</span></div></a><p>该丛书以漫画形式进行儿童科普，在当年国内属于首创。丛书一经推出便大受欢迎，发行量很大，至今在二手书市仍可见其踪迹。书中人物画风明显属于日本漫画风格，或者更准确地说，是手冢治虫的漫画风格。</p><p>&mldr;&mldr;</p></div></div><div class=catalogue-item><time datetime="2025-09-09 00:00:00 +0000 UTC" class=catalogue-time>2025年9月9日</time>
<a href=/posts/what-is-the-windows-userchoice-protection-driver-ucpd.sys/ class=catalogue-title>什么是 Windows UserChoice 保护驱动（UCPD.sys）</a><div class=catalogue-line></div><div class=catalogue-summary><p>在社交媒体上刷到一条非常扯淡的帖子，算是典型的蛆头为了吃「爱国」流量饭，利用民粹主义，专门针对低认知的蠢货们打造的无耻谣言。冠之以「技术流分析」，实则狗屁不懂。</p><figure><img src=/posts/what-is-the-windows-userchoice-protection-driver-ucpd.sys/xhs.png alt=xhs></figure><p>言归正传，这个 <samp>UCPD.sys</samp> 究竟是什么来头呢？故事还要从当年流氓软件大战说起……</p><p>早期 Windows 对文件关联（即文件默认打开程序）的管理非常简单——任何程序都可以通过修改注册表键值来修改文件关联。这导致各种流氓软件滥用该特性来霸占用户电脑，特别是国产浏览器，通过修改 http/https 协议关联程序，来劫持用户上网行为。</p><p>&mldr;&mldr;</p></div><ul class=catalogue-tags><li>#<a href=/tags/Windows/>Windows</a></li></ul></div><div class=catalogue-item><time datetime="2025-09-05 00:00:00 +0000 UTC" class=catalogue-time>2025年9月5日</time>
<a href=/posts/lazarus-project-internationalization-advanced/ class=catalogue-title>Lazarus 项目支持多语言国际化（进阶篇）</a><div class=catalogue-line></div><div class=catalogue-summary><p>在之前的一篇<a href=/posts/lazarus-project-internationalization/>文章</a>中简单介绍了如何在 Lazarus 项目中启用多语言国际化。不过使用 <code>DefaultTranslator</code> 或 <code>SetDefaultLang()</code> 无法实现运行时动态切换 GUI 的语言。更准确地说，在程序中首次调用 <code>LCLTranslator.SetDefaultLang()</code>，并将参数 <code>ForceUpdate</code> 设为 <code>True</code>，是能够在运行时修改 GUI 语言的，但若再次调用便无效了。</p><p>查看 <code>SetDefaultLang()</code> 源代码：</p><figure class=code><pre><span class=code-lang>pascal</span><code data-ln-selected=612,613,614,615,616,617,618 data-ln-start-from=562 data-ln=true class=language-pascal>function SetDefaultLang(Lang: string; Dir: string = &#39;&#39;; LocaleFileName: string = &#39;&#39;; ForceUpdate: boolean = true): string;
{ Arguments:
  Lang - language (e.g. &#39;ru&#39;, &#39;de&#39;, &#39;zh_CN&#39;); empty argument is default language.
  Dir - custom translation files subdirectory (e.g. &#39;mylng&#39;); empty argument means searching only in predefined subdirectories.
  LocaleFileName - custom translation file name; empty argument means that the name is the same as the one of executable.
  ForceUpdate - true means forcing immediate interface update. Only should be set to false when the procedure is
    called from unit Initialization section. User code normally should not specify it.
}
var
  lcfn: string;
  LocalTranslator: TUpdateTranslator;
  i: integer;

begin
  Result := &#39;&#39;;
  LocalTranslator := nil;
  // search first po translation resources
  try
    lcfn := FindLocaleFileName(&#39;.po&#39;, Lang, Dir, LocaleFileName, Result);
    if lcfn &lt;&gt; &#39;&#39; then
    begin
      Translations.TranslateResourceStrings(lcfn);
      LocalTranslator := TPOTranslator.Create(lcfn);
    end
    else
    begin
      // try now with MO translation resources
      lcfn := FindLocaleFileName(&#39;.mo&#39;, Lang, Dir, LocaleFileName, Result);
      if lcfn &lt;&gt; &#39;&#39; then
      begin
        GetText.TranslateResourceStrings(UTF8ToSys(lcfn));
        LocalTranslator := TDefaultTranslator.Create(lcfn);
      end;
    end;
  except
    Result := &#39;&#39;;
    lcfn := &#39;&#39;;
  end;

  if lcfn&lt;&gt;&#39;&#39; then
    TranslateLCLResourceStrings(Lang, lcfn);

  if LocalTranslator&lt;&gt;nil then
  begin
    if Assigned(LRSTranslator) then
      LRSTranslator.Free;
    LRSTranslator := LocalTranslator;

    // Do not update the translations when this function is called from within
    // the unit initialization.
    if ForceUpdate=true then
    begin
      for i := 0 to Screen.CustomFormCount-1 do
        LocalTranslator.UpdateTranslation(Screen.CustomForms[i]);
      for i := 0 to Screen.DataModuleCount-1 do
        LocalTranslator.UpdateTranslation(Screen.DataModules[i]);
    end;
  end;
end;</code></pre><figcaption>lcltranslator.pas</figcaption></figure><p>该函数首先查找本地的 <samp>.po</samp> 或 <samp>.mo</samp> 翻译文件；然后，将程序的资源字符串翻译成本地语言；接下来，创建一个新的 <code>TUpdateTranslator</code> 对象替代全局对象。</p><p>&mldr;&mldr;</p></div><ul class=catalogue-tags><li>#<a href=/tags/Pascal/>Pascal</a></li><li>#<a href=/tags/Lazarus/>Lazarus</a></li></ul></div><div class=catalogue-item><time datetime="2025-09-04 00:00:00 +0000 UTC" class=catalogue-time>2025年9月4日</time>
<a href=/posts/accessing-protected-members-of-object-in-free-pascal/ class=catalogue-title>Free Pascal Hack 之访问对象的 protected 成员</a><div class=catalogue-line></div><div class=catalogue-summary><p>默认情况下，Free Pascal 类中 protected 成员只能被当前类、子类以及同一个 Unit 中的代码访问。然而在实践中，往往会碰到访问其他 Unit 中定义的类实例对象的 protected 成员的需求。通常我们会通过类继承以及修改原始类成员的代码来暴露 protected 成员，然而当该对象来自第三方库，甚至 FCL 和 LCL 时，情况就会比较棘手。有一种 Hack 方法可以实现这个需求，且不用修改原始 Unit 的代码，没有额外副作用。</p><p>&mldr;&mldr;</p></div><ul class=catalogue-tags><li>#<a href=/tags/Pascal/>Pascal</a></li></ul></div><div class=catalogue-item><time datetime="2025-08-26 00:00:00 +0000 UTC" class=catalogue-time>2025年8月26日</time>
<a href=/posts/fixing-a-vcpkg-failure-caused-by-scoop-update/ class=catalogue-title>修复 scoop update 后 vcpkg 无法运行的故障</a><div class=catalogue-line></div><div class=catalogue-summary><p>系统使用的 vcpkg 是由 scoop 安装的，在某次 <code>scoop update -a</code> 更新后故障无法运行。通过分析发现是由于安装脚本未能正确执行导致文件缺失引起的。以下是故障分析过程。</p><h2 id=发现问题>发现问题</h2><p>打开 <a href=https://www.marticliment.com/unigetui/ target=_blank rel=noopener>UniGetUI</a> 更新时发现 vcpkg 的安装源不见了。</p><p>在命令行中运行 <code>vcpkg</code> 提示：</p><pre><code class=language-text>Shim: Could not determine if target is a GUI app. Assuming console.
Shim: Could not create process with command &#39;&#34;D:\Apps\scoop\apps\vcpkg\current\vcpkg.exe&#34; &#39;.</code></pre><p>运行命令 <code>scoop list vcpkg</code>，显示软件已安装：</p><pre><code class=language-text>Installed apps matching &#39;vcpkg&#39;:

Name  Version    Source Updated             Info
----  -------    ------ -------             ----
vcpkg 2025.07.25 main   2025-07-29 10:56:05</code></pre><h2 id=尝试修复>尝试修复</h2><p>看起来是 scoop shim 出了问题。尝试用 <code>scoop reset vcpkg</code> 命令重置。再次运行 <code>vcpkg</code>，无响应。接着尝试卸载 vcpkg 重新安装。运行 <code>scoop uninstall vcpkg</code> 命令，卡在运行 <samp>uninstall script</samp> 无响应。</p><p>&mldr;&mldr;</p></div><ul class=catalogue-tags><li>#<a href=/tags/Scoop/>Scoop</a></li></ul></div><div class=catalogue-item><time datetime="2025-08-21 00:00:00 +0000 UTC" class=catalogue-time>2025年8月21日</time>
<a href=/posts/scoop-install-google-chrome-user-data-issue/ class=catalogue-title>Scoop 安装 Chrome 浏览器的用户数据问题</a><div class=catalogue-line></div><div class=catalogue-summary><p>不知道从哪个版本开始，通过 Scoop 安装的 Chrome 浏览器不再保留本地用户数据。每次更新后，用户数据都要从 Google 账户同步。</p><p>Scoop 官方的解释是因为浏览器限制导致的：</p><blockquote><p>Profile might point to default location (e.g. <code>$env:LOCALAPPDATA\Google\Chrome\User Data</code>), when <code>--user-data-dir</code> point to a specified path(e.g. <code>$dir\userdata</code>(persist\googlechrome\userdata)).</p></blockquote><p>官方的建议是：</p><blockquote><p>I would recommend that you install the default/main browser by its official installer.</p></blockquote><p>不过 Chrome 并不是我的主力浏览器，即便官方不支持，也还是可以补救一下的。</p><p>根据以下路径找到开始菜单里 Chrome 的快捷方式：</p><p>&mldr;&mldr;</p></div><ul class=catalogue-tags><li>#<a href=/tags/Scoop/>Scoop</a></li></ul></div><div class=catalogue-item><time datetime="2025-07-25 10:52:02 +0800 +0800" class=catalogue-time>2025年7月25日 10:52:02</time><p class=head><a href=/moments/202507/1753411922/ style=float:right><span class="fa-solid fa-arrow-up-right-from-square"></span></a>
<span class=author>Fournoas
</span><span class=action>说：</span></p><div class=catalogue-moment><p>问：图中的父亲错在哪里？</p><p>答：他不该乱扔垃圾。</p><div class=images><div class="box img-preview" data-src=/moments/202507/1753411922/01.jpg style=background-image:url(/moments/202507/1753411922/01.jpg)></div></div></div><ul class=catalogue-tags><li>#<a href=/tags/Radio-Yerevan/>Radio Yerevan</a></li></ul></div><div class=catalogue-item><time datetime="2025-07-15 13:26:58 +0800 +0800" class=catalogue-time>2025年7月15日 13:26:58</time><p class=head><a href=/moments/202507/1752557218/ style=float:right><span class="fa-solid fa-arrow-up-right-from-square"></span></a>
<span class=author>Fournoas
</span><span class=action>说：</span></p><div class=catalogue-moment><p>“女大学生有损国格被学校开除”事件不禁让我遥想到当年的中央苏区——来自德国的洋顾问李德提出“希望有个中国女战士陪他睡觉”。组织上为了解决洋顾问的生理问题可谓是殚心竭虑，中央局妇委主任李坚贞立即找来同乡萧月华，以“革命工作需要”为由，安排她成为李德的“妻子”。此类事件在沈容的《红色记忆》里亦有记载（如图）。</p><p>另外，根据美国国务院解密的<a href=https://history.state.gov/historicaldocuments/frus1969-76v18/d12 target=_blank rel=noopener>文件</a>记录，某国伟大领袖在 1973 年接见美国前国务卿基辛格时指出，&ldquo;中国的女人太多了&rdquo;、“先白送给美国几万中国女人”、“这些女人到了美国，美国人的麻烦就多了”。某国工作人员当场就指出，谈话不得记录，否则就是对中国人民的污蔑。而美帝国主义却背信弃义，言而无信地保留了谈话内容。我们应该强烈谴责美帝国主义严重损害某国国格的行为。</p><p><strong>女性属于国家神圣不可侵犯的性资源，女性私自和洋人性交属于出卖国家资源，但如果是国家主动出口的那就没事了</strong>。</p><div class=images><div class="box img-preview" data-src=/moments/202507/1752557218/01.png style=background-image:url(/moments/202507/1752557218/01.png)></div></div></div><ul class=catalogue-tags><li>#<a href=/tags/%E5%AD%A6%E5%9B%9B%E5%8F%B2%E5%AE%88%E5%88%9D%E5%BF%83/>学四史守初心</a></li></ul></div><div class=catalogue-item><time datetime="2025-07-09 12:10:15 +0800 +0800" class=catalogue-time>2025年7月9日 12:10:15</time><p class=head><a href=/moments/202507/1752034215/ style=float:right><span class="fa-solid fa-arrow-up-right-from-square"></span></a>
<span class=author>Fournoas
</span><span class=action>评论《<a href=http://www.news.cn/mrdx/20250709/cf295e7946e44176999e805fc65acc99/c.html target=_blank rel=noopener>甘肃天水幼儿血铅异常来源查明 系后厨违规添加彩色颜料制作食品</a>》：</span></p><div class=catalogue-moment><p>官方公布玉米卷肠包铅含量分别为1052毫克/千克、1340毫克/千克。有网友说，食物要达到如此高的铅含量，添加的只可能是工业颜料铅铬黄。我淘宝搜了一下，铅铬黄价格大概是 42 元每斤，而食用色素日落黄价格仅为 14 元每斤。难道是我淘宝打开方式不对？</p></div></div><div class=catalogue-item><time datetime="2025-07-08 14:52:00 +0800 +0800" class=catalogue-time>2025年7月8日 14:52:00</time><p class=head><a href=/moments/202507/1751957520/ style=float:right><span class="fa-solid fa-arrow-up-right-from-square"></span></a>
<span class=author>Fournoas
</span><span class=action>说：</span></p><div class=catalogue-moment><p>把中国人当日本人整？醒醒，你还想享受外宾待遇？中国人从来就是被当作中国人整的</p></div></div></div><div class=pagination><a href=/ class="left arrow">上一页</a>
<a href=/page/3/ class="right arrow">下一页</a>
<span><sup>2</sup> &frasl; <sub>48</sub></span></div></main><script src=/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/highlight.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/scala.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/nim.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/powershell.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/nginx.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/delphi.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/dos.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/haxe.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://unpkg.com/highlightjs-svelte/dist/svelte.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://unpkg.com/highlightjs-zig/dist/zig.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://unpkg.com/highlightjs-redbol/dist/redbol.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=/js/code.js></script><script>hljs.highlightAll(),hljs.initLineNumbersOnLoad(),hljs.initSelectLines()</script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js crossorigin=anonymous referrerpolicy=no-referrer onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"\\[",right:"\\]",display:!0},{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1}],throwOnError:!1})})</script><footer><span>&copy; <time datetime="2025-10-31 09:04:03.475839999 +0000 UTC m=+0.206996313">2025</time> fournoas.com. Powered by <a href=https://gohugo.io/>Hugo</a> v0.152.2.</span></footer></body></html>