<!doctype html><html lang=zh-CN><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="编程开发与计算机科学"><title>Coding &#183; 白汤四物</title>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/fontawesome.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/solid.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/regular.min.css crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js crossorigin=anonymous></script><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/styles/rainbow.min.css crossorigin=anonymous referrerpolicy=no-referrer><link href rel=alternate type=application/rss+xml title=白汤四物><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-3GNL63B62Q"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3GNL63B62Q")</script></head><body><nav class=nav><div class=nav-container><h1 class=nav-title><a href=/><img src=/logo.png alt=白汤四物></a></h1><ul><li><a href=/posts/><span>文章</span></a></li><li><a href=/moments/><span>动态</span></a></li><li><a href=/categories/><span>分类</span></a></li><li><a href=/tags/><span>标签</span></a></li><li><a href=/search/><span>搜索</span></a></li><li><a href=/about/><span>关于</span></a></li></ul></div></nav><div class=banner><main><ul class=breadcrumb><li><a href=../>分类</a></li><li class=active>Coding</li></ul></main></div><main class=taxon><p class=taxon-desc>编程开发与计算机科学</p><div class="catalogue taxonomy"><div class=catalogue-item><time datetime="2019-08-29 00:00:00 +0000 UTC" class=catalogue-time>2019年8月29日</time>
<a href=https://www.fournoas.com/posts/choosing-a-python-web-framework/ class=catalogue-title>Python Web 框架选型</a><div class=catalogue-line></div><p><p>Python Web 框架有如下几种部署方式：</p><ul><li>WSGI</li><li>ASGI</li><li>独立部署</li><li>CGI/FastCGI</li></ul><p>WSGI是最常见的接口，由PEP333和PEP3333规范定义，获得了最广泛的支持。</p><p>WSGI接口的上游是HTTP Server，下游是WSGI应用，而提供WSGI服务的程序被称为WSGI容器。生产环境中常见的WSGI容器有Gunicorn、uWSGI、Apache mod_wsgi等。另外，很多框架本身也提供了WSGI容器，比如：Gevent、Tornado、Twisted。其中，Gunicorn可以通过自定义worker_class搭载其他异步框架来提高性能，比如：Gevent、Tornado、Meinheld等，且容器中运行的也不一定是标准的WSGI应用，比如Gunicorn+Sanic。</p>&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/Python/>Python</a></li></ul></div><div class=catalogue-item><time datetime="2019-05-04 00:00:00 +0000 UTC" class=catalogue-time>2019年5月4日</time>
<a href=https://www.fournoas.com/posts/ES6-mixin-with-Proxy-and-EventTarget/ class=catalogue-title>ES6 中 Proxy 和 EventTarget 的 Mixin 模式</a><div class=catalogue-line></div><p>Javascript 不支持多重继承，也不支持原生类的 mixin。想实现一个具备 Proxy 和 EventTarget 多重功能的混合类&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/JavaScript/>JavaScript</a></li></ul></div><div class=catalogue-item><time datetime="2019-03-14 00:00:00 +0000 UTC" class=catalogue-time>2019年3月14日</time>
<a href=https://www.fournoas.com/posts/Gandi-simple-hosting-sucks/ class=catalogue-title>Gandi.net Simple Hosting 踩坑记录</a><div class=catalogue-line></div><p><p>Gandi.net 的廉价虚拟主机服务 Simple Hosting 支持PHP / Python / MySQL / Postgresql。 Gandi.net 建站全家桶性价比超级高。买域名送免费邮箱和SSL证书。Simple Hosting 服务的最低配，算上折扣，一年只要300多元。不过由于配置的问题，在实际运行中有很多坑要避开。</p><h3 id=1pip-日志写入权限问题>1、pip 日志写入权限问题</h3><p>运行 pip 会提示没有权限，原因是无法写入 pip.log。</p>&mldr;&mldr;</p><ul class=catalogue-tags></ul></div><div class=catalogue-item><time datetime="2019-01-19 00:00:00 +0000 UTC" class=catalogue-time>2019年1月19日</time>
<a href=https://www.fournoas.com/posts/the-python-ssl-extension-was-not-compiled-missing-the-OpenSSL-lib/ class=catalogue-title>编译安装 Python 时发生“Missing the OpenSSL lib”错误</a><div class=catalogue-line></div><p><p>使用pyenv在ubuntu18上安装多个python版本。按照文档，先安装编译依赖库：</p><pre><span class=code-lang>SHELL</span><code class=language-shell>sudo apt-get install -y make build-essential libssl-dev zlib1g-dev libbz2-dev \
libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev \
xz-utils tk-dev libffi-dev liblzma-dev python-openssl</code></pre><p>使用 <code>pyenv install -v x.x.x</code> 命令来安装指定版本的python。在安装3.4及以下版本时会报错：</p><pre><code class=language-text>ERROR: The Python ssl extension was not compiled. Missing the OpenSSL lib?</code></pre><p>原因是ubuntu默认安装的libssl-dev版本是1.1，旧版本的python只支持1.0版本。</p>&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/Python/>Python</a></li></ul></div><div class=catalogue-item><time datetime="2018-09-14 00:00:00 +0000 UTC" class=catalogue-time>2018年9月14日</time>
<a href=https://www.fournoas.com/posts/writing-python-2.7-and-3.5-or-above-compatible-code/ class=catalogue-title>编写兼容 python 2.7 和 3.5+ 的代码</a><div class=catalogue-line></div><p><p>编写新的代码最好不要再兼容 Python 2.6 及以下版本了，坑太多。兼容 2.7 就足够了。同样地，Python 3.5 及以下版本的坑也很多，Python 3 最好从 3.5 开始兼容。</p><h3 id=导入模块>导入模块</h3><p>Python 3 默认绝对导入，Python 2 默认相对导入。所以代码第一行就应写上：</p><pre><span class=code-lang>PYTHON</span><code class=language-python>from __future__ import absolute_import</code></pre><h3 id=异常处理>异常处理</h3><p>Python 2 和 3 异常处理语句有所差异，应使用新的异常处理语句：</p><pre><span class=code-lang>PYTHON</span><code class=language-python>try:
    raise ValueError(&#39;value error&#39;)
except ValueError as e
    pass</code></pre><h3 id=显式继承新式类>显式继承新式类</h3><p>Python 3 默认使用新式类， 代码显式继承新式类实现兼容：</p>&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/Python/>Python</a></li></ul></div><div class=catalogue-item><time datetime="2018-04-07 00:00:00 +0000 UTC" class=catalogue-time>2018年4月7日</time>
<a href=https://www.fournoas.com/posts/how-to-install-Scrapy-in-Windows/ class=catalogue-title>Windows 下安装 Scrapy</a><div class=catalogue-line></div><p><p>Scrapy 依赖的某些组件需要编译，所以需要安装 Visual C++ Build Tools（<a href=http://landinghub.visualstudio.com/visual-cpp-build-tools target=_blank rel=noopener>http://landinghub.visualstudio.com/visual-cpp-build-tools</a>）。</p><p>另外可以在这里（<a href=https://www.lfd.uci.edu/~gohlke/pythonlibs/ target=_blank rel=noopener>https://www.lfd.uci.edu/~gohlke/pythonlibs/</a>）找到第三方编译好的扩展包。</p><p>之前在别的电脑上安装都是成功的。然而今天在某电脑上按装到 Twisted 组件时就出错了。看错误提示是 Unicode 字符转换失败报错，而且好像和命令行的字符编码有关。尝试了 cmd 和 cmder 都不行。用 <code>chcp</code> 命令切换 charset 也不行。最后用 cygwin64 的命令行给安装成功了。</p>&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/Python/>Python</a></li></ul></div><div class=catalogue-item><time datetime="2018-01-12 00:00:00 +0000 UTC" class=catalogue-time>2018年1月12日</time>
<a href=https://www.fournoas.com/posts/install-electron-using-npm-issue/ class=catalogue-title>npm 安装 electron 出错的解决方法</a><div class=catalogue-line></div><p><h3 id=问题>问题</h3><p>使用命令 npm install -g electron 安装 electronjs 时报错：</p><p><img src=ill-1.png alt=出错信息></p><p>出错信息表明下载 electron 的地址被墙掉了。</p><h3 id=解决方案>解决方案</h3><p>使用淘宝镜像。设置环境变量：</p><pre><span class=code-lang>SHELL</span><code class=language-shell>set ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/</code></pre><p>然后再用命令安装：</p><pre><span class=code-lang>SHELL</span><code class=language-shell>npm install -g electron</code></pre>&mldr;&mldr;</p><ul class=catalogue-tags></ul></div><div class=catalogue-item><time datetime="2015-12-28 00:00:00 +0000 UTC" class=catalogue-time>2015年12月28日</time>
<a href=https://www.fournoas.com/posts/php-and-python-quick-start-guide/ class=catalogue-title>PHP 和 Python 速查手册</a><div class=catalogue-line></div><p><h2 id=部署方式>部署方式</h2><h3 id=php-的部署方式>PHP 的部署方式</h3><p>PHP 程序有如下几种运行方式：</p><ul><li>CGI</li><li>FastCGI</li><li>ISAPI Extension</li><li>Apache Mod</li></ul><p>其中，CGI 和 FastCGI 以进程的方式运行，使用 nts（非线程安全）版本； ISAPI Extension 和 Apache Mod 以线程方式运行在宿主进程（IIS进程或Apache进程）内，使用 ts（线程安全）版本。</p><p>以上几种方式以 FastCGI 最为常见。PHP 5 自带的 php-cgi 可以直接运行 FastCGI 服务。不过在生产环境中，一般使用 PHP-FPM 作为 FastCGI 的进程管理工具。</p>&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/Python/>Python</a></li><li>#<a href=/tags/PHP/>PHP</a></li></ul></div><div class=catalogue-item><time datetime="2015-12-28 00:00:00 +0000 UTC" class=catalogue-time>2015年12月28日</time>
<a href=https://www.fournoas.com/posts/setting-up-your-development-environment-using-vagrant/ class=catalogue-title>使用 Vagrant 作为开发环境</a><div class=catalogue-line></div><p><h2 id=初始化虚拟机环境>初始化虚拟机环境</h2><p>下载 <a href=https://github.com/kraksoft/vagrant-box-ubuntu/releases/download/15.04/ubuntu-15.04-amd64.box target=_blank rel=noopener>ubuntu-15.04-amd64.box</a> 包文件。使用离线安装的方式：</p><pre><span class=code-lang>SHELL</span><code class=language-shell>vagrant box add ubuntu-15.04-amd64 file:///D:\downloads\ubuntu-15.04-amd64.box</code></pre><p>其中 <code>D:\downloads\ubuntu-15.04-amd64.box</code> 是下载后的 box 文件路径。</p><p>切换到项目路径下，初始化并启动 Vagrant：</p><pre><span class=code-lang>SHELL</span><code class=language-shell>mkdir ~/project/devstack
cd ~/project/devstack
vagrant init ubuntu-15.04-amd64</code></pre><p>启动并登录虚拟机系统</p><pre><span class=code-lang>SHELL</span><code class=language-shell>vagrant up
vagrant ssh</code></pre><h2 id=安装软件>安装软件</h2><p>更新 apt 软件库：</p><pre><span class=code-lang>SHELL</span><code class=language-shell>sudo apt-get update -y
sudo apt-get upgrade -y</code></pre><p>安装需要的软件包：</p><pre><span class=code-lang>SHELL</span><code class=language-shell>sudo apt-get install -y git ansible libmysqld-dev mysql-server mongodb-server redis-server nginx-full supervisor uwsgi uwsgi-plugin-python python-pip python-dev python-virtualenv python-mysqldb python-mongoengine python-redis python-gevent virtualenvwrapper php5 php5-fpm php5-dev libjpeg-dev</code></pre><p>安装第三方软件：</p><pre><span class=code-lang>SHELL</span><code class=language-shell>sudo dpkg -i /vagrant/elasticsearch-2.0.0.deb
sudo dpkg -i /vagrant/logstash_2.0.0-1_all.deb</code></pre><p>禁用无用的服务：</p>&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/Vagrant/>Vagrant</a></li></ul></div><div class=catalogue-item><time datetime="2015-10-23 00:00:00 +0000 UTC" class=catalogue-time>2015年10月23日</time>
<a href=https://www.fournoas.com/posts/issue-with-convert-HTML-entities/ class=catalogue-title>HTML Entities 转换问题</a><div class=catalogue-line></div><p><p>用 Python 给富文本编辑器的后端做一个 HTMLPurifier 组件。各种 XSS 技巧都筛了一遍。觉得万无一失了，没想到还是栽在了坑里。</p><p>HTMLPurifier 组件使用 Python HTMLParser 来实现。HTMLParser 在处理 HTML Entities 的时候和主流的浏览器不一致。主流浏览器（FireFox、Chrome、IE）都允许省略HTML Entities末尾的分号。而 HTMLParser 的unescape 函数在处理时要求必须有结尾分号，导致后端的 HTML 过滤被绕过。</p>&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/%E5%89%8D%E7%AB%AF/>前端</a></li></ul></div></div><div class=pagination><a href=/categories/coding/page/5/ class="left arrow">上一页</a>
<a href=/categories/coding/page/7/ class="right arrow">下一页</a>
<span><sup>6</sup> &frasl; <sub>7</sub></span></div></main><script src=/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/highlight.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/scala.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/nim.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/powershell.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/nginx.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/delphi.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/dos.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/haxe.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://unpkg.com/highlightjs-svelte/dist/svelte.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=/js/code.js></script><script>hljs.highlightAll(),hljs.initLineNumbersOnLoad(),hljs.initSelectLines()</script><footer><span>&copy; <time datetime="2024-10-23 02:00:18.461253848 +0000 UTC m=+0.253867752">2024</time> fournoas.com. Powered by <a href=https://gohugo.io>Hugo</a>.</span></footer></body></html>