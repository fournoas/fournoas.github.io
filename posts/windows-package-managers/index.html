<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Windows 包管理工具 &#183; 白汤四物</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/fontawesome.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/solid.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/regular.min.css crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js crossorigin=anonymous></script>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/rainbow.min.css crossorigin=anonymous referrerpolicy=no-referrer><link href rel=alternate type=application/rss+xml title=白汤四物><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-153840298-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-153840298-1")</script></head><body><nav class=nav><div class=nav-container><h1 class=nav-title><a href=/><img src=/logo.png alt=白汤四物></a></h1><ul><li><a href=/posts/><span>文章</span></a></li><li><a href=/moments/><span>动态</span></a></li><li><a href=/categories/><span>分类</span></a></li><li><a href=/tags/><span>标签</span></a></li><li><a href=/search/><span>搜索</span></a></li><li><a href=/about/><span>关于</span></a></li></ul></div></nav><main data-pagefind-body><div class="page post"><h1 class=post-title data-pagefind-meta=title>Windows 包管理工具</h1><div class=post-line></div><div class=post-info><span>作者</span>
<span data-pagefind-meta=作者>Fournoas</span>
<span>于&nbsp;</span><time datetime="2022-01-24 00:00:00 +0000 UTC" data-pagefind-meta=日期>2022年1月24日</time>
<span>发布在&nbsp;</span><ul class=categories><li><a data-pagefind-filter=分类 href=/categories/using/>Using</a></li></ul></div><nav id=TableOfContents><ul><li><a href=#chocolatey>Chocolatey</a><ul><li><a href=#安装>安装</a></li><li><a href=#常用命令>常用命令</a><ul><li><a href=#安装软件>安装软件</a></li><li><a href=#卸载软件>卸载软件</a></li><li><a href=#更新软件>更新软件</a></li><li><a href=#列出已安装的软件>列出已安装的软件</a></li><li><a href=#查找软件>查找软件</a></li><li><a href=#查看需要更新的包>查看需要更新的包</a></li></ul></li><li><a href=#设置代理>设置代理</a></li></ul></li><li><a href=#scoop>Scoop</a><ul><li><a href=#安装-1>安装</a></li><li><a href=#常用命令-1>常用命令</a><ul><li><a href=#安装软件-1>安装软件</a></li><li><a href=#卸载软件-1>卸载软件</a></li><li><a href=#更新软件-1>更新软件</a></li><li><a href=#列出已安装软件>列出已安装软件</a></li><li><a href=#查找软件-1>查找软件</a></li><li><a href=#查看需要更新的包-1>查看需要更新的包</a></li><li><a href=#软件仓库>软件仓库</a></li><li><a href=#软件版本切换>软件版本切换</a></li></ul></li><li><a href=#设置代理-1>设置代理</a></li><li><a href=#下载加速>下载加速</a></li></ul></li><li><a href=#winget>WinGet</a><ul><li><a href=#安装-2>安装</a></li><li><a href=#常用命令-2>常用命令</a><ul><li><a href=#安装软件-2>安装软件</a></li><li><a href=#卸载软件-2>卸载软件</a></li><li><a href=#更新软件-2>更新软件</a></li><li><a href=#列出已安装软件-1>列出已安装软件</a></li><li><a href=#查找软件-2>查找软件</a></li><li><a href=#查看需要更新的包-2>查看需要更新的包</a></li></ul></li><li><a href=#设置代理-2>设置代理</a></li></ul></li><li><a href=#总结>总结</a></li></ul></nav><div id=collapsed-toc><a class=button><i class="fa-solid fa-bars"></i></a></div><aside id=aside-toc data-pagefind-ignore><div class=header><i class="fa-solid fa-bars"></i>&nbsp;章节目录<a class="button close"><i class="fa-solid fa-xmark"></i></a></div><div class=content></div></aside><p>几乎每个 Linux 发行版都会自带包管理工具，比如 CentOS 的 yum、Debian 家族的 apt、Arch Linux 的 pacman 等；此外，FreeBSD 系统有 pkg 和 ports；macOS 上有 Homebrew。而 Windows 长久以来都是通过安装包来进行软件分发部署，官方没有提供任何包管理工具，且 Win 10 自带的微软应用商店一直被人诟病。直到 2020 年，微软通过抄袭另一款开源 Windows 包管理工具 AppGet 之后，开发出了一款叫做 WinGet 的包管理工具，但微软的这款工具只能运行在 Win 10 系统上。令人遗憾的是，由于微软的抄袭行为，<a href=https://appget.net/ target=_blank rel=noopener>AppGet</a> 的作者已经停止维护这个项目。</p><p>除了官方的 <a href=https://docs.microsoft.com/zh-cn/windows/package-manager/ target=_blank rel=noopener>WinGet</a>，Windows 上比较流行的第三方的包管理工具有：</p><ul><li><a href=https://chocolatey.org/ target=_blank rel=noopener>Chocolatey</a>由商业公司运作的<a href=https://github.com/chocolatey/choco/ target=_blank rel=noopener>开源项目</a>，且提供付费的专业版和商业版。包含命令行工具和图形用户界面的 Chocolatey GUI。</li><li><a href=https://scoop.sh/ target=_blank rel=noopener>Scoop</a>
个人维护的<a href=https://github.com/ScoopInstaller/Scoop target=_blank rel=noopener>开源项目</a>。只提供命令行工具，有第三方维护的安装源。除了常用软件外，还包含大量开发工具，比较适合程序员。</li></ul><h2 id=chocolatey>Chocolatey</h2><p>Chocolatey 的社区仓库里有 9000 多个软件，几乎涵盖了所有的主流软件。Chocolatey 还提供一个 GUI 程序，方便普通用户使用。</p><p>由于 Chocolatey 采用常规全局模式安装软件，所以需要管理员权限。如果采用非管理员模式，Chocolatey 只能安装 Portable 版本的软件，可用软件数量就少了很多。</p><h3 id=安装>安装</h3><p>可以参考官方的安装方法：<a href=https://chocolatey.org/install#individual target=_blank rel=noopener>https://chocolatey.org/install#individual</a>。如果操作系统是 Windows 7，则需要先安装 <a href=https://docs.microsoft.com/zh-cn/powershell/scripting/install/installing-powershell-on-windows target=_blank rel=noopener>PowerShell</a>。</p><p>打开 PowerShell 的命令行界面，输入如下命令：</p><pre><code class=language-powershell>Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString(&#39;https://community.chocolatey.org/install.ps1&#39;))</code></pre><p>等待在线安装完毕，运行 <code>choco -?</code> 命令来确定 Chocolatey 是否安装成功。</p><h3 id=常用命令>常用命令</h3><p>建议日常操作使用 Chocolatey GUI。可以手动安装 GUI 程序：</p><pre><code class=language-powershell>choco install chocolateygui</code></pre><h4 id=安装软件>安装软件</h4><p>使用 <code>choco install &lt;软件名></code> 命令来安装软件。下面的命令用来安装压缩软件 7zip：</p><pre><code class=language-powershell>choco install 7zip -y</code></pre><p>参数 <code>-y</code> 表示安装过程不需要确认。</p><p>同一个软件包，有时候会有 Install 和 Portable 两种版本，在软件包的名字后通过 <code>.install</code> 和 <code>.portable</code> 后缀来区分。以 7zip 为例，仓库中有三个版本：</p><ol><li>7zip</li><li>7zip.portable</li><li>7zip.install</li></ol><p>如果不确定要安装哪个版本，安装时可以不需要指定后缀，Chocolatey 会自动安装默认依赖的版本。比如 7zip 软件包默认依赖 7zip.install。所以安装完 7zip 后，在已安装列表中会看到 7zip 和 7zip.install 两个软件包。</p><h4 id=卸载软件>卸载软件</h4><pre><code class=language-powershell>choco uninstall 7zip</code></pre><h4 id=更新软件>更新软件</h4><p>更新指定的软件：</p><pre><code class=language-powershell>choco upgrade 7zip</code></pre><p>或者使用如下命令更新所有已安装软件：</p><pre><code class=language-powershell>choco upgrade all</code></pre><h4 id=列出已安装的软件>列出已安装的软件</h4><pre><code class=language-powershell>choco list -l</code></pre><h4 id=查找软件>查找软件</h4><pre><code class=language-powershell>choco search 7zip</code></pre><h4 id=查看需要更新的包>查看需要更新的包</h4><pre><code class=language-powershell>choco outdated</code></pre><h3 id=设置代理>设置代理</h3><p>很多软件的安装包都需要从 GitHub 上下载，出于你懂的原因，需要设置代理。</p><p>Chocolatey 默认使用系统代理。另外可以通过命令行参数、环境变量和 <code>choco config</code> 命令来设置代理。</p><p>使用 <code>--proxy</code> 命令行参数：</p><pre><code class=language-powershell>choco upgrade all --proxy=http://127.0.0.1:8080</code></pre><p>设置环境变量：</p><pre><code class=language-powershell>set http_proxy=http://127.0.0.1:8080
set https_proxy=http://127.0.0.1:8080</code></pre><p>显式配置 Chocolatey 的代理：</p><pre><code class=language-powershell>choco config set proxy http://127.0.0.1:8080</code></pre><p>Chocolatey 不支持 SOCKS 代理。如果你使用 SOCKS 代理，可以通过 <a href=https://www.privoxy.org/ target=_blank rel=noopener>Privoxy</a> 转换成 HTTP 代理。</p><h2 id=scoop>Scoop</h2><p>Scoop 可以添加第三方的 bucket，也就是安装源。默认的 main bucket 里有 900 多个软件，extras bucket 里有 1300 多个软件。值得一提的是，还有个 versions bucket，里面包含了一些软件的历史版本。虽然 Scoop 上的软件数量不多，但是涵盖了大多数开发工具。对于软件开发人员来说，使用 Scoop 来搭建开发环境相当方便。</p><p>与 Chocolatey 采用系统全局安装方式不同的是，Scoop 安装的软件都保存在 <code>%userprofile%\scoop\apps</code> 路径下，不会污染全局环境，不需要管理员权限就可以安装软件。</p><h3 id=安装-1>安装</h3><p>安装 Scoop 前，需要先安装 <a href=https://aka.ms/wmf5download target=_blank rel=noopener>PowerShell 5.1</a> 及以上版本，和 <a href=https://www.microsoft.com/net/download target=_blank rel=noopener>.NET Framework 4.5</a> 及以上版本。</p><p>打开 PowerShell 的命令行界面，输入如下命令：</p><pre><code class=language-powershell>Set-ExecutionPolicy RemoteSigned -Scope Process -Force; iwr -useb get.scoop.sh | iex</code></pre><p>如果安装过程提示网络错误，可以设置系统代理：</p><pre><code class=language-powershell>irm get.scoop.sh -Proxy &#39;http://&lt;ip:port&gt;&#39; | iex</code></pre><p>Scoop 默认的应用安装目录为 &ldquo;%USERPROFILE%\scoop&rdquo; ，可以在安装 Scoop 时指定应用安装目录：</p><pre><code class=language-powershell>irm get.scoop.sh -outfile &#39;install.ps1&#39;
.\install.ps1 -ScoopDir &#39;D:\Applications\Scoop&#39; -ScoopGlobalDir &#39;F:\GlobalScoopApps&#39;</code></pre><p>具体可见官方文档：<a href=https://github.com/ScoopInstaller/Install target=_blank rel=noopener>https://github.com/ScoopInstaller/Install</a></p><h3 id=常用命令-1>常用命令</h3><p>安装完毕后先运行环境检查命令：</p><pre><code class=language-powershell>scoop checkup</code></pre><p>根据提示信息，完成系统配置即可。例如下面的错误消息意味着需要安装 <code>dark</code> 或 <code>wixtools</code> 才能解压安装文件：</p><blockquote><p>WARN This version of Windows does not support configuration of LongPaths.<br>ERROR &lsquo;dark&rsquo; is not installed! It&rsquo;s required for unpacking installers created with the WiX Toolset. Please run &lsquo;scoop install dark&rsquo; or &lsquo;scoop install wixtoolset&rsquo;.<br>WARN Found 2 potential problems.</p></blockquote><p>如果在 PowerShell 中运行 scoop 报如下错误：</p><blockquote><p>scoop : 无法加载文件 C:\Users\XXX\scoop\shims\scoop.ps1，因为在此系统上禁止运行脚本。有关详细信息，请参阅 https:/go.microsoft.com/fwlink/?LinkID=135170 中的 about_Execution_Policies。</p></blockquote><p>则需要以管理员身份运行 PowerShell 并执行下面的命令：</p><pre><code class=language-powershell>Set-ExecutionPolicy RemoteSigned</code></pre><h4 id=安装软件-1>安装软件</h4><p>使用 <code>scoop checkup</code> 命令检查后，一般会要求安装三个包，分别是：7zip、dark 和 innounp。使用如下命令安装：</p><pre><code class=language-powershell>scoop install 7zip dark innounp</code></pre><h4 id=卸载软件-1>卸载软件</h4><pre><code class=language-powershell>scoop uninstall 7zip</code></pre><h4 id=更新软件-1>更新软件</h4><p>更新指定软件：</p><pre><code class=language-powershell>scoop update 7zip</code></pre><p>或者使用如下命令更新所有已安装软件：</p><pre><code class=language-powershell>scoop update -a</code></pre><p>更新 scoop：</p><pre><code class=language-powershell>scoop update</code></pre><p>禁止更新指定软件：</p><pre><code class=language-powershell>scoop hold 7zip</code></pre><p>允许更新指定软件：</p><pre><code class=language-powershell>scoop unhold 7zip</code></pre><h4 id=列出已安装软件>列出已安装软件</h4><pre><code class=language-powershell>scoop list</code></pre><h4 id=查找软件-1>查找软件</h4><pre><code class=language-powershell>scoop search 7zip</code></pre><h4 id=查看需要更新的包-1>查看需要更新的包</h4><pre><code class=language-powershell>scoop status</code></pre><h4 id=软件仓库>软件仓库</h4><p>在 Scoop 中，bucket 代表软件仓库。使用如下命令列出官方支持的 bucket：</p><pre><code class=language-powershell>scoop bucket known</code></pre><blockquote><p>main
extras
versions
nirsoft
php
nerd-fonts
nonportable
java
games</p></blockquote><p>其中 <code>extras</code> 是对 <code>main</code> 仓库的补充，<code>versions</code> 提供各软件的历史版本。上述两个 bucket 比较常用，使用如下命令添加：</p><pre><code class=language-powershell>scoop bucket add extras
scoop bucket add versions</code></pre><p>还可以添加第三方的 bucket：</p><pre><code class=language-powershell>scoop bucket add dorado https://github.com/chawyehsu/dorado</code></pre><p>访问下面的网址查看 Scoop 的第三方 bucket：</p><p><a href=https://rasa.github.io/scoop-directory/by-apps target=_blank rel=noopener>https://rasa.github.io/scoop-directory/by-apps</a></p><h4 id=软件版本切换>软件版本切换</h4><p>Scoop 可以安装同一个软件的多个版本，并支持在不同的版本之间切换。比如同时安装了 Python 3.X 和 Python 2.7，那么可以通过 <code>scoop reset</code> 命令在两个版本的 Python 间切换。安装命令如下：</p><pre><code class=language-powershell>scoop install python27 python</code></pre><p>将系统默认的 Python 切换到 Python 2.7：</p><pre><code class=language-powershell>scoop reset python27</code></pre><p>将系统默认的 Python 切换到 Python 3.X：</p><pre><code class=language-powershell>scoop reset python</code></pre><h3 id=设置代理-1>设置代理</h3><p>基于相同的原因，scoop 也需要设置代理才能正常使用：</p><pre><code class=language-powershell>scoop config proxy 127.0.0.1:8080</code></pre><h3 id=下载加速>下载加速</h3><p>Scoop 默认配置启用 aria2 作为下载客户端，支持多线程下载和断点续传。只要安装 aria2 即可解锁该特性：</p><pre><code class=language-powershell>scoop install aria2</code></pre><p>还可以通过配置开关禁用此功能：</p><pre><code class=language-powershell>scoop config aria2-enabled false</code></pre><h2 id=winget>WinGet</h2><p>目前为止，WinGet 上已经有 3000 多个软件，有后来居上之势。遗憾的是，WinGet 只能安装在 Windows 10 1809(17763) 及以上版本的系统。</p><p>同 Chocolatey 一样，WinGet 采用全局方式安装软件包。特别地，WinGet 能检测出系统中已安装的软件包，即便该软件并非是通过 WinGet 安装的。</p><h3 id=安装-2>安装</h3><p>主要有以下三种安装方式：</p><ol><li>从微软应用商店安装 <a href=https://www.microsoft.com/en-us/p/app-installer/9nblggh4nns1 target=_blank rel=noopener>App Installer</a>；</li><li><a href=https://github.com/microsoft/winget-cli/releases target=_blank rel=noopener>GitHub 主页</a>下载安装包手动安装；</li><li>通过 Scoop 命令 <code>scoop install winget</code> 安装。</li></ol><p>方法 1 只能获取到 Production 版本的 WinGet，如果要安装 Preview 版本的 WinGet，则需要通过方法 2 和方法 3。</p><p>如果执行 <code>winget</code> 命令提示缺少 VC++ Runtime，则需要先安装 vcredist。可以使用 Scoop 安装：</p><pre><code class=language-powershell>scoop install vcredist</code></pre><h3 id=常用命令-2>常用命令</h3><p>早期版本的 WinGet 不支持卸载，最新的版本已经支持。</p><h4 id=安装软件-2>安装软件</h4><pre><code class=language-powershell>winget install 7zip</code></pre><h4 id=卸载软件-2>卸载软件</h4><pre><code class=language-powershell>winget uninstall 7zip</code></pre><p>特别地，WinGet 可以卸载系统中已安装的任意软件，而该软件是否通过 WinGet 安装并没有限制。比如可以通过 WinGet 删除系统软件 Cortana：</p><pre><code class=language-powershell>winget uninstall cortana</code></pre><h4 id=更新软件-2>更新软件</h4><p>更新指定的软件：</p><pre><code class=language-powershell>winget upgrade 7zip</code></pre><p>更新所有的软件：</p><pre><code class=language-powershell>winget upgrade --all</code></pre><h4 id=列出已安装软件-1>列出已安装软件</h4><pre><code class=language-powershell>winget list</code></pre><p>WinGet 会列出系统中安装的所有软件，而不仅限于通过 WinGet 安装的软件。可以通过列表的 Source 列的值是否为 <code>winget</code> 来判断 WinGet 中是否包含该软件包。</p><h4 id=查找软件-2>查找软件</h4><pre><code class=language-powershell>winget search 7zip</code></pre><p>也通过下面的网址在线查找软件包：</p><p><a href=https://winget.run/ target=_blank rel=noopener>https://winget.run/</a></p><h4 id=查看需要更新的包-2>查看需要更新的包</h4><pre><code class=language-powershell>winget upgrade</code></pre><h3 id=设置代理-2>设置代理</h3><p>WinGet 使用系统代理，无需在软件中设置。</p><h2 id=总结>总结</h2><p>如果仅需要安装和管理普通应用软件，推荐使用 Chocolatey；如果需要安装各种开发工具配置开发环境，推荐使用 Scoop；Windows 10 / 11 用户可以使用 WinGet 代替 Chocolatey。</p><p>此外，如果要安装的应用软件需要文件关联或者和 Windows Shell 进行集成的，则应该用 Chocolatey 或 Winget 安装。因为 Scoop 安装的版本大多是 Portable 版本的，不能实现文件关联和系统集成。</p></div><div class=taxonomy data-pagefind-ignore><div class=taxonomy-tags><ul class=tags><li>#<a data-pagefind-filter=标签 href=/tags/%E8%BD%AF%E4%BB%B6/>软件</a></li><li>#<a data-pagefind-filter=标签 href=/tags/Windows/>Windows</a></li></ul></div></div><div class=pagination data-pagefind-ignore><a href=/moments/202112/1640183755/ class="left arrow">上一篇</a>
<a href=/moments/202201/1643027853/ class="right arrow">下一篇</a>
<a href=# class=top>返回顶部</a></div></main><script src=/js/page.js></script>
<script src=/js/main.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/scala.min.js crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/nim.min.js crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/powershell.min.js crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/nginx.min.js crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=/js/code.js></script>
<script>hljs.highlightAll(),hljs.initLineNumbersOnLoad(),hljs.initSelectLines()</script><footer><span>&copy; <time datetime="2023-07-14 03:31:28.23349677 +0000 UTC m=+0.285106245">2023</time> fournoas.com. Powered by <a href=https://gohugo.io>Hugo</a>.</span></footer></body></html>