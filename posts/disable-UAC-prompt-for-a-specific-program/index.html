<!doctype html><html lang=zh-CN><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="在启动某些 Windows 程序时会弹出 UAC （用户账户控制）确认窗口，这表示该程序需要管理员权限来运行。用户可以选择批准或拒绝。

      运行 Listary 每次都要弹出 UAC 通知
    



      以管理员身份运行 Everything
    


用户可以通过控制面板 > 系统和安全 > 更改用户帐户控制设置来更改 UAC 的行为。将滑块移动到从不通知便可以全局关闭系统 UAC 通知。Windows 并没有提供 UAC 通知的白名单功能。"><title>关闭指定程序的 UAC 通知 &#183; 白汤四物</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/fontawesome.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/solid.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/regular.min.css crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js crossorigin=anonymous></script><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/styles/rainbow.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css crossorigin=anonymous referrerpolicy=no-referrer><link href rel=alternate type=application/rss+xml title=白汤四物><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-3GNL63B62Q"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3GNL63B62Q")</script></head><body><nav class=nav><div class=nav-container><h1 class=nav-title><a href=/><img src=/logo.png alt=白汤四物></a></h1><ul><li><a href=/posts/><span>文章</span></a></li><li><a href=/moments/><span>动态</span></a></li><li><a href=/categories/><span>分类</span></a></li><li><a href=/tags/><span>标签</span></a></li><li><a href=/search/><span>搜索</span></a></li><li><a href=/about/><span>关于</span></a></li></ul></div></nav><main data-pagefind-body><div class="page post"><h1 class=post-title data-pagefind-meta=title>关闭指定程序的 UAC 通知</h1><div class=post-line></div><div class=post-info><span>作者</span>
<span data-pagefind-meta=作者>Fournoas
</span><span>写于&nbsp;</span><time datetime="2025-05-15 00:00:00 +0000 UTC" data-pagefind-meta=日期>2025年5月15日</time>
<span>发布在&nbsp;</span><ul class=categories><li><a data-pagefind-filter=分类 href=/categories/using/>Using</a></li></ul></div><p>在启动某些 Windows 程序时会弹出 <abbr title="User Access Control">UAC</abbr> （用户账户控制）确认窗口，这表示该程序需要管理员权限来运行。用户可以选择批准或拒绝。</p><figure><img src=/posts/disable-UAC-prompt-for-a-specific-program/listary-uac.png alt="运行 Listary 每次都要弹出 UAC 通知"><figcaption><p>运行 Listary 每次都要弹出 UAC 通知</p></figcaption></figure><figure><img src=/posts/disable-UAC-prompt-for-a-specific-program/everything-uac.png alt="以管理员身份运行 Everything"><figcaption><p>以管理员身份运行 Everything</p></figcaption></figure><p>用户可以通过<samp>控制面板 > 系统和安全 > 更改用户帐户控制设置</samp>来更改 UAC 的行为。将滑块移动到<samp>从不通知</samp>便可以全局关闭系统 UAC 通知。Windows 并没有提供 UAC 通知的白名单功能。</p><figure><img src=/posts/disable-UAC-prompt-for-a-specific-program/uac.png alt="UAC 设置"><figcaption><p>UAC 设置</p></figcaption></figure><p>程序触发 UAC 弹窗的方式基本分两种：</p><ol><li><p>在程序清单 (Manifest) 中设置 <code>requestedExecutionLevel</code>：</p><pre><span class=code-lang>xml</span><code class=language-xml>&lt;trustInfo xmlns=&#34;urn:schemas-microsoft-com:asm.v2&#34;&gt;
  &lt;security&gt;
    &lt;requestedPrivileges xmlns=&#34;urn:schemas-microsoft-com:asm.v3&#34;&gt;
      &lt;requestedExecutionLevel level=&#34;requireAdministrator&#34; uiAccess=&#34;false&#34; /&gt;
    &lt;/requestedPrivileges&gt;
  &lt;/security&gt;
&lt;/trustInfo&gt;</code></pre></li><li><p>使用 <code>ShellExecute()</code> 启动程序，将 <code>lpOperation</code> 参数设置为 <code>"runas"</code></p></li></ol><p><strong>针对第一种情况，可以通过简单注册表操作来实现 UAC 静默</strong>。Listary 属于第一种情况，以它为例。在注册表编辑器中访问如下路径：</p><pre><code class=language-text>HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers</code></pre><p>新建字符串值，数据名称为程序的路径，比如 <samp>D:\Apps\Listary\Listary.Service.exe</samp>， 数据值为 <samp>RunAsInvoker</samp>。其含义为忽略程序清单中的 <samp>requestedExecutionLevel</samp>，以程序调用者的权限运行。因此也就不会弹出 UAC 通知了。</p><p>该方法的缺点是，<strong>程序并没有获得管理员权限</strong>，可能会导致一些功能无法正常使用。</p><p>另外，也可以使用 NirSoft 的 <a href=https://www.nirsoft.net/utils/app_compatibility_view.html target=_blank rel=noopener>AppCompatibilityView</a> 图形工具来进行该操作。</p><p><strong>对于第二种情况，则需要借助于任务计划程序</strong>。其原理为，新建一个不包含任何触发条件的任务，并设置为以最高权限运行，用户使用命令来触发该任务。由于任务本身具有管理员权限，因此不会弹出 UAC 通知。</p><p>用户可以在<samp>控制面板 > 管理工具 > 任务计划程序</samp>中以交互方式创建任务，或者使用命令行创建。</p><div class=note><div class=note-content>请在以管理员身份运行的命令行中执行下面的命令。</div></div><ol><li><p>使用 <code>schtasks</code> 命令：</p><pre><span class=code-lang>cmd</span><code class=language-cmd>rem 由于 sctasks 命令不支持创建无触发器的任务，因此设置了一个无效执行时间
schtasks /create /tn &#34;RunAsAdmin\Everything&#34; /tr &#34;D:\Apps\Everything\everything.exe&#34; /rl HIGHEST /sc once /st 00:00</code></pre></li><li><p>使用 PowerShell 的 <code>Register-ScheduledTask</code> 命令：</p><pre><span class=code-lang>powershell</span><code class=language-powershell># 不能省略 -UserId 参数，且必须与当前登入用户一致，否则程序无法在桌面上显示
Register-ScheduledTask -TaskName &#34;RunAsAdmin\Everything&#34; -Action (New-ScheduledTaskAction -Execute &#34;D:\Apps\Everything\everything.exe&#34;) -Principal (New-ScheduledTaskPrincipal -UserId ([System.Security.Principal.WindowsIdentity]::GetCurrent().Name) -RunLevel Highest)</code></pre></li></ol><p>使用下面的命令以管理员身份运行 Everything：</p><pre><span class=code-lang>cmd</span><code class=language-cmd>schtasks.exe /run /tn &#34;RunAsAdmin\Everything&#34;</code></pre><p>也可以将以上命令创建为快捷方式运行。</p></div><div class=taxonomy data-pagefind-ignore></div><div class=pagination data-pagefind-ignore><a href=/moments/202505/1747291819/ class="left arrow">上一篇</a>
<a href=/moments/202505/1746758565/ class="right arrow">下一篇</a>
<a href=# class=top>返回顶部</a></div></main><script src=/js/page.js></script><script src=/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/highlight.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/scala.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/nim.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/powershell.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/nginx.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/delphi.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/dos.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/haxe.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://unpkg.com/highlightjs-svelte/dist/svelte.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://unpkg.com/highlightjs-zig/dist/zig.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://unpkg.com/highlightjs-redbol/dist/redbol.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=/js/code.js></script><script>hljs.highlightAll(),hljs.initLineNumbersOnLoad(),hljs.initSelectLines()</script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js crossorigin=anonymous referrerpolicy=no-referrer onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"\\[",right:"\\]",display:!0},{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1}],throwOnError:!1})})</script><footer><span>&copy; <time datetime="2025-07-08 06:52:17.461954496 +0000 UTC m=+1.038166108">2025</time> fournoas.com. Powered by <a href=https://gohugo.io/>Hugo</a> v0.147.9.</span></footer></body></html>