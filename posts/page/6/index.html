<!doctype html><html lang=zh-CN><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>文章 &#183; 白汤四物</title>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/fontawesome.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/solid.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/regular.min.css crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js crossorigin=anonymous></script><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/styles/rainbow.min.css crossorigin=anonymous referrerpolicy=no-referrer><link href rel=alternate type=application/rss+xml title=白汤四物><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-3GNL63B62Q"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3GNL63B62Q")</script></head><body><nav class=nav><div class=nav-container><h1 class=nav-title><a href=/><img src=/logo.png alt=白汤四物></a></h1><ul><li><a href=/posts/><span>文章</span></a></li><li><a href=/moments/><span>动态</span></a></li><li><a href=/categories/><span>分类</span></a></li><li><a href=/tags/><span>标签</span></a></li><li><a href=/search/><span>搜索</span></a></li><li><a href=/about/><span>关于</span></a></li></ul></div></nav><div class=banner><main><ul class=breadcrumb><li>文章</li></ul></main></div><main class=main><div class=catalogue><div class=catalogue-item><time datetime="2022-10-28 00:00:00 +0000 UTC" class=catalogue-time>2022年10月28日</time>
<a href=https://www.fournoas.com/posts/why-does-ctrl-c-not-kill-python-process-in-windows-console/ class=catalogue-title>为何 Windows 下无法用 Ctrl+C 终止 Python 进程</a><div class=catalogue-line></div><p><p>在 Windows 命令行中按下 <code>Ctrl+C</code> 或者 <code>Ctrl+Break</code> 可以结束当前正在执行的命令。通常情况下，这个方法同样适用于 Python 的控制台进程。特别地，Python 内置了一个 <code>KeyboardInterrupt</code> 异常专门用于捕获按下 <code>Ctrl+C</code> 而触发的程序退出：</p><pre><span class=code-lang>PYTHON</span><code class=language-python>try:
    while True:
        print(&#39;running...&#39;)
except KeyboardInterrupt:
    print(&#39;keyboard interrupt received&#39;)
    # 退出前清理现场，释放资源</code></pre><p>Python 触发 <code>KeyboardInterrupt</code> 异常的底层实现原理依赖于 signal 机制<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>。使用信号处理器也可以捕获按下 <code>Ctrl+C</code> 而触发的程序退出：</p><pre><span class=code-lang>PYTHON</span><code class=language-python>import signal

def signal_handler(signum, frame):
    raise KeyboardInterrupt

signal.signal(signal.SIGINT, signal_handler)

try:
    while True:
        print(&#39;running...&#39;)
except KeyboardInterrupt:
    print(&#39;keyboard interrupt received&#39;)
    # 退出前清理现场，释放资源</code></pre><p>但是在某些情况下，Windows 的 Python 命令行程序无法用 <code>Ctrl+C</code> 或者 <code>Ctrl+Break</code> 终止。比如在 <a href=https://bugs.python.org/issue41437 target=_blank rel=noopener>issue 41437: SIGINT blocked by socket operations like recv on Windows</a> 中提到：在 Windows 中，当 <code>socket.recv()</code> 操作阻塞时，无法响应 <code>SIGINT</code>。类似的，当 <code>thread.join()</code> 操作阻塞时，也无法用 <code>Ctrl+C</code> 终止。例如下面代码在 Windows 下运行就无法使用 <code>Ctrl+C</code> 来退出：</p>&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/Python/>Python</a></li></ul></div><div class=catalogue-item><time datetime="2022-10-25 00:00:00 +0000 UTC" class=catalogue-time>2022年10月25日</time>
<a href=https://www.fournoas.com/posts/vboxmanage-command-line-tool-for-virtualbox/ class=catalogue-title>VirtualBox 命令行管理工具——VBoxManage</a><div class=catalogue-line></div><p><p>VBoxManage 是 Oracle VM VirtualBox 的命令行管理工具。在 Windows 系统中，软件默认安装在 <code>C:\Program Files\Oracle\VirtualBox</code> 目录下。运行该命令前，可以将命令行的当前路径切换到软件安装路径：</p><pre><span class=code-lang>POWERSHELL</span><code class=language-powershell>cd &#34;C:\Program Files\Oracle\VirtualBox&#34;</code></pre><h2 id=显示所有已安装的虚拟机>显示所有已安装的虚拟机</h2><pre><span class=code-lang>POWERSHELL</span><code class=language-powershell>.\VBoxManage list vms</code></pre><p>结果如下：</p><pre><code class=language-text>&#34;Ubuntu&#34; {e16b273d-58e1-4274-8e89-f4ad5e1e3778}
&#34;FreeBSD&#34; {91bda7b4-dce2-4174-879c-e71858db3fe5}
&#34;SmartOS&#34; {279f20a0-839c-476c-b7f9-b5a40ee30eec}</code></pre><h2 id=移动虚拟机到其他路径>移动虚拟机到其他路径</h2><p>VirtualBox 的虚拟机默认安装在 <code>C:\Users\&lt;Username>\VirtualBox VMs</code> 路径下，会占用很大的硬盘空间。通过下面命令可以将虚拟机数据移动到其他路径：</p><pre><span class=code-lang>POWERSHELL</span><code class=language-powershell>.\VBoxManage.exe movevm ubuntu --folder &#34;D:\Data\VirtualBox VMs&#34;</code></pre><h2 id=打开启用嵌套-vt-xamd-v开关>打开「启用嵌套 VT-x/AMD-V」开关</h2><p>此开关在「设置-系统-处理器」选项卡中，默认置灰不可用。可以通过以下命令开启：</p>&mldr;&mldr;</p><ul class=catalogue-tags></ul></div><div class=catalogue-item><time datetime="2022-10-20 00:00:00 +0000 UTC" class=catalogue-time>2022年10月20日</time>
<a href=https://www.fournoas.com/posts/monte-carlo-simulation-of-a-middle-school-math-olympiad-problem/ class=catalogue-title>一道初中奥数题的蒙特卡洛解法</a><div class=catalogue-line></div><p><figure><img src=/posts/monte-carlo-simulation-of-a-middle-school-math-olympiad-problem/problem.jpg alt=四只鸭子在一个圆形水池中随机游动。某一时刻，四只鸭子在同一半圆内的概率是多少？><figcaption><p>四只鸭子在一个圆形水池中随机游动。某一时刻，四只鸭子在同一半圆内的概率是多少？</p></figcaption></figure><p>这个问题必须隐含一个前提：当水池被分为两半后，任意一只鸭子，要么属于这一边，要么属于另一边，不存在同时属于两边或不属于任何一边的情况。可以把鸭子视作质点，如果鸭子正好落在分割线上，则认为此鸭子属于顺时针方向的一侧。</p>&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/%E7%AE%97%E6%B3%95/>算法</a></li><li>#<a href=/tags/Python/>Python</a></li></ul></div><div class=catalogue-item><time datetime="2022-10-18 00:00:00 +0000 UTC" class=catalogue-time>2022年10月18日</time>
<a href=https://www.fournoas.com/posts/adding-full-text-search-to-a-hugo-static-website/ class=catalogue-title>为 Hugo 静态网站添加全文检索功能</a><div class=catalogue-line></div><p><p><a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 是一种使用 Go 语言编写的静态网站构建工具。在其官网文章《<a href=https://gohugo.io/tools/search/ target=_blank rel=noopener>Search for your Hugo Website</a>》中，介绍几种为静态网站添加全文检索功能的方法。本文采用 <a href=https://pagefind.app/ target=_blank rel=noopener>Pagefind</a> 为纯静态网站实现全文检索功能。</p><p>Pagefind 是一个独立的命令行工具，可以通过 <code>npm install pagefind</code> 来安装。其原理是：运行 Pagefind 命令，扫描所有静态网页并生成索引；用户搜索时，通过网页中内嵌的 JavaScript 脚本来访问预先生成的索引，从而实现静态全文检索。</p>&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/Hugo/>Hugo</a></li></ul></div><div class=catalogue-item><time datetime="2022-10-13 00:00:00 +0000 UTC" class=catalogue-time>2022年10月13日</time>
<a href=https://www.fournoas.com/posts/hide-mastodon-site-information-and-user-toots-list/ class=catalogue-title>隐藏 Mastodon 站点信息和用户嘟文列表</a><div class=catalogue-line></div><p><p>Mastodon 实例默认会在网页版中显示站点的用户数量和嘟文数量。此外，用户主页上会显示所有公开的嘟文。但是对于自建实例，有时候你并不想让别人可以通过网页来访问这些信息和数据。本文以 <a href=https://github.com/mastodon/mastodon/releases/tag/v3.1.3 target=_blank rel=noopener>Mastodon v3.1.3</a> 为例，通过修改代码来实现隐藏目的。本文提供的方法未在其他版本上验证，可能会不兼容。</p><h2 id=隐藏站点用户总数和嘟文总数>隐藏站点用户总数和嘟文总数</h2><p>Mastodon 默认会在「关于本站」页面中显示站点的用户数量和嘟文数量。通过修改代码可以隐藏这些信息。使用编辑器打开 <code>app/views/about/more.html.haml</code> 文件，将第 18 行至第 25 行的代码注释：</p>&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/Mastodon/>Mastodon</a></li></ul></div><div class=catalogue-item><time datetime="2022-10-12 00:00:00 +0000 UTC" class=catalogue-time>2022年10月12日</time>
<a href=https://www.fournoas.com/posts/anonymous-creator-license/ class=catalogue-title>佚名创作者许可</a><div class=catalogue-line></div><p><p>很多人希望自己发布在个人社交网络空间或者其他小圈子的内容不要被署名转发至他处。换句话说，作者不介意别人转发、修改或再次创作自己的作品，但是不希望再次发布的时候携带原作者的信息以及原始内容的出处，比如用户不希望自己发表的内容被别人以完整截图的形式转发。因此，我模仿 BSD License 的内容，起草了一份「佚名创作者许可 v1.0」，简称 AC 许可，全文如下：</p>&mldr;&mldr;</p></div><div class=catalogue-item><time datetime="2022-10-09 00:00:00 +0000 UTC" class=catalogue-time>2022年10月9日</time>
<a href=https://www.fournoas.com/posts/javascript-prototypal-inheritance/ class=catalogue-title>JavaScript 的原型继承</a><div class=catalogue-line></div><p><figure><img src=/posts/javascript-prototypal-inheritance/prototype.jpg alt=一张经常被使用的关系图><figcaption><p>一张经常被使用的关系图</p></figcaption></figure><p>JavaScript 中的每个对象都有一个 <code>[[Prototype]]</code> 的内部属性，该属性指向的对象就是当前对象的<strong>原型</strong>。每个原型对象也有自己的原型，依次向上遍历形成<strong>原型链</strong>。当我们访问一个对象的属性或者方法时，如果在当前对象中没有找到该属性或者方法，会通过原型链依次从原型对象中查找，从而实现对象继承的功能。我们可以通过 <code>__proto__</code> 属性或者 <code>Object.getPrototypeOf()</code> / <code>Object.setPrototypeOf()</code>方法来访问对象的原型：</p>&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/JavaScript/>JavaScript</a></li></ul></div><div class=catalogue-item><time datetime="2022-09-30 00:00:00 +0000 UTC" class=catalogue-time>2022年9月30日</time>
<a href=https://www.fournoas.com/posts/the-crowd-on-the-internet/ class=catalogue-title>网络乌合之众</a><div class=catalogue-line></div><p><p>起因是某天在网上看到如下视频：</p><p><video controls><source src=01.mp4 type=video/mp4></video></p><p>视频下面的评论自然是一边倒地谴责打人的男孩和教唆打人的家长，也有指责看客冷漠，还有人发动群众要对男孩进行网暴，甚至发出死亡威胁的。</p><p>大部分人通过这个视频，会脑补出一部「野蛮家长霸凌孤儿寡母，冷漠看客袖手旁观」的苦情剧。然后键盘看客们按耐不住的「正义感」就喷薄而出，大有致「施暴者」于死地而后快的势头。但是只要认真看完视频可以发现，那个所谓的「施暴者」男孩并不太会打架，甚至动作有些胆怯，再结合视频开头男孩的父亲拉开男孩衣领，对周围人说的那句「都给我们抓破了」，我们还能脑补出另外一个故事：打人的男孩之前被女人怀里的那个孩子欺负了，他的父亲和女人理论，女人非但不道歉，还说：「小孩子打架又没啥关系」之类的话激怒了男孩的父亲。气急败坏的父亲心里肯定想：「你不是小孩子打架没关系么，那我就让我家孩子揍你家娃」，于是就发生了视频中的那一幕。</p>&mldr;&mldr;</p></div><div class=catalogue-item><time datetime="2022-09-27 00:00:00 +0000 UTC" class=catalogue-time>2022年9月27日</time>
<a href=https://www.fournoas.com/posts/dummy-stub-spy-fake-and-mock-in-unit-test/ class=catalogue-title>单元测试中的 Dummy、Stub、Spy、Fake 和 Mock</a><div class=catalogue-line></div><p><p>单元测试用来验证一个单元（模块、函数或类）的工作是否正常，测试过程通常需要其他单元进行配合。这种情况下，我们引入测试替身（Test doubles）来替代测试单元的外部依赖，使得测试单元能够顺利运行。这些测试替身分为五种，分别是：</p><ol><li>Dummy</li><li>Stub</li><li>Spy</li><li>Fake</li><li>Mock</li></ol><h2 id=dummy>Dummy</h2><p>或称为 Dummy Object。指在测试中用来传递而不会被使用的对象，通常是为了让单元测试代码能够运行，而不起任何作用的填充数据。</p>&mldr;&mldr;</p><ul class=catalogue-tags></ul></div><div class=catalogue-item><time datetime="2022-09-23 00:00:00 +0000 UTC" class=catalogue-time>2022年9月23日</time>
<a href=https://www.fournoas.com/posts/python-MRO-and-C3-linearization/ class=catalogue-title>Python 的 MRO 和 C3 线性化</a><div class=catalogue-line></div><p><p>MRO，即 Method Resolution Order、方法解析顺序，是 Python 对象调用父类方法时的遍历顺序。由于 Python 支持多重继承，类的继承关系可视作一个有向无环图，方法解析顺序就相当于拓扑排序——将图中节点线性排列。自 Python 2.3 起，新式类通过 <strong>C3 线性化</strong>算法来计算 MRO。</p><p>之所以被称作 C3，是因为算法符合如下三个特性（<strong>C</strong>onsistent with <strong>3</strong> properties）：</p>&mldr;&mldr;</p><ul class=catalogue-tags><li>#<a href=/tags/%E7%AE%97%E6%B3%95/>算法</a></li><li>#<a href=/tags/Python/>Python</a></li></ul></div></div><div class=pagination><a href=/posts/page/5/ class="left arrow">上一页</a>
<a href=/posts/page/7/ class="right arrow">下一页</a>
<span><sup>6</sup> &frasl; <sub>20</sub></span></div></main><script src=/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/highlight.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/scala.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/nim.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/powershell.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/nginx.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/delphi.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/dos.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/haxe.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://unpkg.com/highlightjs-svelte/dist/svelte.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=/js/code.js></script><script>hljs.highlightAll(),hljs.initLineNumbersOnLoad(),hljs.initSelectLines()</script><footer><span>&copy; <time datetime="2024-10-23 02:00:18.991408581 +0000 UTC m=+0.784022485">2024</time> fournoas.com. Powered by <a href=https://gohugo.io>Hugo</a>.</span></footer></body></html>